<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="orderProduct">
	
	<!-- 희진시작 -->
	<select id="selectOrderListByMemberNo" resultMap="memberCollectionMap">
		SELECT o.order_no, m.member_name, m.member_no, o.order_id, i.item_name, o.order_date, o.order_item_no, o.delivery_no, o.order_item_count, o.order_pay_method, o.order_pay_status  
		FROM ORDER_PRODUCT O LEFT JOIN MEMBER M ON O.MEMBER_NO = M.MEMBER_NO LEFT JOIN ITEM I ON I.ITEM_NO = O.ITEM_NO LEFT JOIN COUPON_LIST C ON C.MEMBER_NO = M.MEMBER_NO WHERE O.MEMBER_NO = #{memberNo} ORDER BY ORDER_DATE DESC
	</select>
	
	<resultMap type="member" id="memberCollectionMap">
		<id column="member_no" property="memberNo"/>
		<result column="member_name" property="memberName"/>
		<!-- <result column="member_point" property="memberPoint"/> -->
		
		<!-- 1:N관계의 테이블을 조인해서 리턴하는 경우 -->
		<collection property="orderProductList" ofType="orderProduct">
			<id column="order_no" property="orderNo"/>
			<result column="member_No" property="memberNo"/>
			<result column="order_id" property="orderId"/>
			<result column="order_Date" property="orderDate"/>
			<result column="order_item_no" property="orderItemNo"/>
			<result column="order_item_count" property="orderItemCount"/>
			<result column="order_pay_method" property="orderPayMethod"/>
			<result column="order_pay_status" property="orderPayStatus"/>
			<result column="delivery_no" property="deliveryNo"/>
		</collection>
		<collection property="itemList" ofType="item">
			<id column="item_no" property="itemNo"/>
			<result column="item_name" property="itemName"/>
		</collection>
	</resultMap>
	
	<resultMap type="couponList" id="couponListMap">
	
	</resultMap>
	
	<resultMap type="OrderProduct" id="orderProductMap">
		
	</resultMap>
	<!-- 희진 끝 -->
	
</mapper>
    
    
    
    
    
    
    
    